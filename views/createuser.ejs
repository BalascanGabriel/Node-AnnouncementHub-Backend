<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <!-- ... HTML structure ... -->
    <form action="/users/new" method="POST" id="usercreate">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required>

        <button type="submit">Create User</button>
    </form>
    <!-- ... More HTML ... -->

    <script>
        const form = document.querySelector("#usercreate");
        const name = document.querySelector("#name");
        const email = document.querySelector("#email");
        const password = document.querySelector("#password");
        form.onsubmit = async (e) => {
            e.preventDefault()
            console.log(name.value, email.value, password.value)
            let res = await fetch('/users/new', {
                method: "POST",
                mode: "cors",
                cache: "no-cache",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    name: name.value,
                    email: email.value,
                    password: password.value
                })
            })
            res = await res.json()
            console.log(res)
            if(res.success == true)
                window.location.href = '/users'
        }

    </script>
</body>

</html>